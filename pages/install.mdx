# Installing üWave
üWave comes in two parts: the API server, and the web client. Typically you need to run both. The hosting experience is still full of rough edges, so some Linux experience is going to be very useful.

## Dependencies
To run üWave, you need a server with:

* Node.js 12.x or up. The latest LTS release, 16.x, is ideal.
* MongoDB 4.2.x or up - [Install instructions](https://docs.mongodb.com/manual/administration/install-community/)
* Redis

### Ubuntu 20.04
On Ubuntu 20.04, the following commands will install the dependencies we need:

```bash
echo "deb http://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse" \
  | sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list
curl -sL https://deb.nodesource.com/setup_16.x | sudo -E bash -

sudo apt-get update
sudo apt-get install -y build-essential mongodb-org nodejs redis-server
```

## Install
The üWave API server and web client are both installable from npm. Use:

```bash
npm install --global u-wave-core u-wave-web
```

Both packages provide a small command line interface. They can be configured with environment variables. Try running `u-wave-core` to see the options.

## Run with systemd
```ini
[Unit]
Description=üWave API Server
After=network.target

[Service]
User=u-wave
Group=u-wave
ExecStart=/home/u-wave/.npm/prefix/bin/u-wave-core
WorkingDirectory=/home/u-wave/
Environment=PORT=6042
Environment=MONGODB_URL=mongodb://127.0.0.1:27017/uwave
Environment=REDIS_URL=redis://127.0.0.1:6379
# Your YouTube API key
Environment=YOUTUBE_API_KEY=...

[Install]
WantedBy=multi-user.target
```

```ini
[Unit]
Description=üWave Web Client
After=network.target

[Service]
User=u-wave
Group=u-wave
ExecStart=/home/u-wave/.npm/prefix/bin/u-wave-web
WorkingDirectory=/home/u-wave/
Environment=PORT=6041
Environment=CLIENT_TITLE="üWave"
# URL to access the HTTP API. Must NOT have a trailing slash (/).
Environment=API_URL=https://your-instance.app/api
# URL to access the WebSocket API. Usually the same as above, but https → wss.
Environment=SOCKET_URL=wss://your-instance.app/api/

[Install]
WantedBy=multi-user.target
```

## Setting up an Admin account
There is no automated setup process yet. After starting your instance, visit it and create an account. It will be a normal user account at the start. You will have to go into the database and manually upgrade it to an admin account.
